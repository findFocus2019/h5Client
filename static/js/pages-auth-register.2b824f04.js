(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-auth-register"],{"1eab":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},"5b1c":function(t,e,n){var i=n("de99");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("5ed1d91e",i,!0,{sourceMap:!1,shadowMode:!1})},"5ff0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-page-body uni-bg-white"},[n("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[n("v-uni-form",{staticClass:"uni-common-mt uni-common-pt",on:{submit:function(e){e=t.$handleEvent(e),t.formSubmit(e)}}},[n("v-uni-view",{staticClass:"uni-form-item uni-column uni-border-bottom"},[n("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",required:"",placeholder:"请输入登录手机号码"},model:{value:t.postData.mobile,callback:function(e){t.$set(t.postData,"mobile",e)},expression:"postData.mobile"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column uni-border-bottom"},[n("v-uni-input",{staticClass:"uni-input",attrs:{type:"password",required:"",placeholder:"请输入登录密码"},model:{value:t.postData.password,callback:function(e){t.$set(t.postData,"password",e)},expression:"postData.password"}})],1),n("v-uni-view",{staticClass:"uni-flex uni-border-bottom uni-form-item"},[n("v-uni-view",{staticClass:"uni-flex-item uni-column"},[n("v-uni-input",{staticClass:"uni-input",attrs:{type:"password",required:"",placeholder:"请输入验证码",maxlength:"6"},model:{value:t.postData.verify_code,callback:function(e){t.$set(t.postData,"verify_code",e)},expression:"postData.verify_code"}})],1),n("v-uni-view",{staticClass:"uni-common-pl uni-common-pr "},[n("v-uni-view",{staticClass:"uni-border-btn-radius uni-center btn-sms",on:{click:function(e){e=t.$handleEvent(e),t.smsSendClick(e)}}},[t._v(t._s(t.sms.text))])],1)],1),n("v-uni-view",{staticClass:"uni-flex uni-common-mt uni-common-pa"},[n("v-uni-view",{},[n("v-uni-checkbox",{on:{click:function(e){e=t.$handleEvent(e),t.checkChange(e)}}})],1),n("v-uni-view",{staticClass:"uni-flex-item uni-text-light"},[t._v("我已阅读并同意"),n("v-uni-text",{staticClass:"uni-text-red"},[t._v("《用户使用协议》")])],1)],1),n("v-uni-view",{staticClass:"uni-common-mt uni-common-pl uni-common-pr"},[n("v-uni-button",{staticClass:"uni-border-btn-radius",attrs:{type:"warn",formType:"submit"}},[t._v("确定")])],1),0==t.postData.type?n("v-uni-view",{staticStyle:{position:"relative",left:"-30upx",height:"0"}},[n("v-uni-image",{staticStyle:{width:"750upx"},attrs:{src:"http://img-juren.oss-cn-shenzhen.aliyuncs.com/assets/images/reg-bg.png",mode:"widthFix"}})],1):t._e(),n("v-uni-view",{staticClass:"uni-common-pa uni-common-mt uni-center uni-flex",staticStyle:{position:"relative"}},[n("v-uni-view",{staticClass:"uni-column uni-flex-item uni-link ",on:{click:function(e){e=t.$handleEvent(e),t.goBack(e)}}},[n("v-uni-text",{staticClass:"uni-bold"},[t._v("返回登录")])],1),n("v-uni-view",{staticClass:"uni-column uni-flex-item uni-link",on:{click:function(e){e=t.$handleEvent(e),t.goIndex(e)}}},[n("v-uni-text",{staticClass:"uni-bold"},[t._v("去首页")])],1)],1),2==t.postData.type?n("v-uni-view",{staticClass:"uni-common-mt uni-text-gray uni-common-pa uni-border-top"},[t._v("老用户绑定请重新设置新密码")]):t._e(),3==t.postData.type?n("v-uni-view",{staticClass:"uni-common-mt uni-text-gray uni-common-pa uni-border-top"},[n("v-uni-view",[t._v("1.绑定已有账户，请输入已有账户密码")]),n("v-uni-view",[t._v("2.绑定新账户，设置一个新的密码")])],1):t._e()],1)],1)],1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},"63c7":function(t,e,n){"use strict";n.r(e);var i=n("1eab"),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},"7efa":function(t,e,n){"use strict";n.r(e);var i=n("fde5"),s=n("63c7");for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);var a=n("2877"),u=Object(a["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports},"7f57":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),s=a(n("57e2")),o=a(n("7efa"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,s,o,a){try{var u=t[o](a),r=u.value}catch(c){return void n(c)}u.done?e(r):Promise.resolve(r).then(i,s)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function a(t){u(o,i,s,a,r,"next",t)}function r(t){u(o,i,s,a,r,"throw",t)}a(void 0)})}}var c={components:{uniIcon:o.default},data:function(){return{postData:{mobile:"",password:"",verify_code:"",type:0},sms:{text:"获取验证码",second:60,click:0},checked:0,isInvite:0}},computed:{oAuthId:function(){return this.$store.state.oAuthId},inviteUserId:function(){return this.$store.state.inviteUserId}},onShow:function(){var t=uni.getStorageSync("auth_reg_type")||0;this.postData.type=t,0==t||(1==t?uni.setNavigationBarTitle({title:"重置密码"}):2==t?uni.setNavigationBarTitle({title:"老用户绑定"}):3==t&&uni.setNavigationBarTitle({title:"三方登录绑定"}));var e="";e="h5";var n=uni.getSystemInfoSync();this.postData.oauth_info={platform:n.platform,device:n.model,type:e}},onHide:function(){uni.getStorageSync("auth_reg_type",0)},methods:{checkChange:function(){this.checked=!this.checked,console.log("checkChange",this.checked)},formSubmit:function(){var t=r(i.default.mark(function t(){var e,n,o,a=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.checked){t.next=3;break}return uni.showToast({title:"请阅读并同意《用户使用协议》",duration:2e3,icon:"none"}),t.abrupt("return");case 3:if(e=this.postData,""!=e.mobile&&""!=e.password&&""!=e.verify_code){t.next=7;break}return uni.showToast({title:"注册信息未正确填写",duration:2e3,icon:"none"}),t.abrupt("return");case 7:return e.pid=this.inviteUserId,3==e.type&&(e.oauth_info.oauth_id=this.oAuthId),console.log("formSubmit postData",JSON.stringify(e)),uni.showLoading({title:"注册中..."}),t.next=13,s.default.post("auth/register",e);case 13:n=t.sent,console.log("formSubmit ret",JSON.stringify(n)),uni.hideLoading(),0==n.code?3==e.type?(uni.showToast({title:"绑定成功",duration:2e3,icon:"success"}),o=n.data.token,console.log("formSbumit token",o),uni.setStorageSync("user_auth_token",o),this.$store.state.hasLogin=!0,this.$store.dispatch("userInfoGet"),setTimeout(function(){a.isInvite?uni.switchTab({url:"/pages/main/main"}):uni.navigateBack({delta:1})},2e3)):(uni.showToast({title:n.message,duration:2e3,icon:"success"}),setTimeout(function(){a.isInvite?uni.switchTab({url:"/pages/main/main"}):uni.navigateBack({delta:1})},2e3)):uni.showToast({title:n.message,duration:2e3,icon:"none"});case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),smsSendClick:function(){var t=r(i.default.mark(function t(){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.sms.click||this.smsSend();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),smsSend:function(){var t=r(i.default.mark(function t(){var e,n=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(60!=this.sms.second){t.next=15;break}if(console.log("sms send ... ..."),this.postData.mobile&&11==this.postData.mobile.length){t.next=5;break}return uni.showToast({icon:"none",title:"输入正确手机号"}),t.abrupt("return");case 5:return this.sms.click=1,t.next=8,this.$store.dispatch("sendSmsCode",{mobile:this.postData.mobile});case 8:if(e=t.sent,0!=e.code){t.next=13;break}uni.showToast({icon:"success",title:"验证码发送成功"}),t.next=15;break;case 13:return uni.showToast({icon:"none",title:e.message}),t.abrupt("return");case 15:0==this.sms.second?(this.sms.second=60,this.sms.text="发送",this.sms.click=0):(this.sms.text="("+this.sms.second--+"s)",console.log("sms send ... ...",this.sms.second),60!=this.sms.second&&setTimeout(function(){n.smsSend()},1e3));case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),goBack:function(){uni.redirectTo({url:"/pages/auth/login"})},goIndex:function(){uni.reLaunch({url:"/pages/main/main"})}},onLoad:function(t){var e=t.puid||0;this.isInvite=t.isInvite||0,console.log("onLoad======",e,this.isInvite),e&&(this.$store.state.inviteUserId=e)}};e.default=c},de99:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".btn-sms[data-v-09837809]{width:%?200?%;height:%?80?%;line-height:%?80?%;border:%?1?% solid #d81e06;border-radius:%?40?%;color:#d81e06}",""])},e884:function(t,e,n){"use strict";var i=n("5b1c"),s=n.n(i);s.a},ef60:function(t,e,n){"use strict";n.r(e);var i=n("7f57"),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},fb6d:function(t,e,n){"use strict";n.r(e);var i=n("5ff0"),s=n("ef60");for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);n("e884");var a=n("2877"),u=Object(a["a"])(s["default"],i["a"],i["b"],!1,null,"09837809",null);e["default"]=u.exports},fde5:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-icon",class:["uni-icon-"+t.type],style:{color:t.color,"font-size":t.fontSize},on:{click:function(e){e=t.$handleEvent(e),t.onClick()}}})},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})}}]);