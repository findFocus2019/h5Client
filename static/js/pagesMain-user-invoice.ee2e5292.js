(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMain-user-invoice"],{"57c9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("a34a")),i=n("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("a763"),p={data:function(){return{from:"user",postData:{category:1,type:1,info:1,title:"",company_no:"",company_title:""},categorys:[{id:"1",text:"普通增值税发票"}],types:[{id:"1",text:"个人"},{id:"2",text:"公司"}],infos:[{id:"1",text:"商品明细"},{id:"2",text:"商品类别"}],infoText:["","发票内容显示详细商品名称及价格信息","发票内容显示商品类别及价格信息"],rules1:[{name:"title",checkType:"string",checkRule:"1,",errorMsg:"请填写个人抬头"}],rules2:[{name:"company_title",checkType:"string",checkRule:"1,",errorMsg:"请填写公司名称"},{name:"company_no",checkType:"string",checkRule:"1,",errorMsg:"请填写纳税识别号"}]}},computed:u({},(0,i.mapState)(["hasLogin","userInvoice"])),methods:u({},(0,i.mapActions)(["goToLoginPage"]),{infoChange:function(e){console.log(e),this.postData.info=e.detail.value},typeChange:function(e){console.log(e),this.postData.type=e.detail.value},categoryChange:function(e){console.log(e),this.postData.category=e.detail.value},saveVoice:function(){var e=s(r.default.mark(function e(){var t,n,i,a;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.postData,n=[],1==t.type?n=this.rules1:2==t.type&&(n=this.rules2),console.log("rules",n),i=l.check(t,n),console.log("checkRes",i),i){e.next=9;break}return uni.showToast({title:l.error,icon:"none"}),e.abrupt("return");case 9:return console.log("postData",t),e.next=12,this.$store.dispatch("userInvoiceUpdate",t);case 12:a=e.sent,0===a.code&&(this.$store.state.mallOrderConfirm.invoice=1,this.$store.dispatch("userInvoiceGet"),uni.navigateBack({delta:1}));case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),onLoad:function(){var e=s(r.default.mark(function e(t){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasLogin){e.next=3;break}return this.goToLoginPage(),e.abrupt("return");case 3:if(this.userInvoice.id){e.next=7;break}return e.next=6,this.$store.dispatch("userInvoiceGet");case 6:console.log("this.userInvoice",this.$store.state.userInvoice);case 7:this.postData.category=this.userInvoice.category||1,this.postData.type=this.userInvoice.type||1,this.postData.info=this.userInvoice.info||1,this.postData.title=this.userInvoice.title||"",this.postData.company_title=this.userInvoice.company_title||"",this.postData.company_no=this.userInvoice.company_no||"",console.log("onLoad",this.postData);case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()};t.default=p},9996:function(e,t,n){"use strict";n.r(t);var r=n("57c9"),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t["default"]=i.a},a763:function(e,t,n){"use strict";e.exports={error:"",check:function(e,t){for(var n=0;n<t.length;n++){if(!t[n].checkType)return!0;if(!t[n].name)return!0;if(!t[n].errorMsg)return!0;if(!e[t[n].name])return this.error=t[n].errorMsg,!1;switch(t[n].checkType){case"string":var r=new RegExp("^.{"+t[n].checkRule+"}$");if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"int":r=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[n].checkRule+"}$");if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[n].name]))return this.error=t[n].errorMsg,!1;var i=t[n].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[n].name]>i[1]||e[t[n].name]<i[0])return this.error=t[n].errorMsg,!1;break;case"betweenD":r=/^-?[1-9][0-9]?$/;if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;i=t[n].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[n].name]>i[1]||e[t[n].name]<i[0])return this.error=t[n].errorMsg,!1;break;case"betweenF":r=/^-?[0-9][0-9]?.+[0-9]+$/;if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;i=t[n].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[n].name]>i[1]||e[t[n].name]<i[0])return this.error=t[n].errorMsg,!1;break;case"same":if(e[t[n].name]!=t[n].checkRule)return this.error=t[n].errorMsg,!1;break;case"notsame":if(e[t[n].name]==t[n].checkRule)return this.error=t[n].errorMsg,!1;break;case"email":r=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"phoneno":r=/^1[0-9]{10,10}$/;if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"zipcode":r=/^[0-9]{6}$/;if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"reg":r=new RegExp(t[n].checkRule);if(!r.test(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"in":if(-1==t[n].checkRule.indexOf(e[t[n].name]))return this.error=t[n].errorMsg,!1;break;case"notnull":if(null==e[t[n].name]||e[t[n].name].length<1)return this.error=t[n].errorMsg,!1;break}}return!0},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},d77d:function(e,t,n){"use strict";n.r(t);var r=n("da78"),i=n("9996");for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);var o=n("2877"),s=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,"7f24ecfa",null);t["default"]=s.exports},da78:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top"},[e._v("发票类型")]),n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top"},[n("v-uni-radio-group",{staticClass:"uni-flex",attrs:{name:"category"},on:{change:function(t){t=e.$handleEvent(t),e.categoryChange(t)}}},e._l(e.categorys,function(t){return n("v-uni-label",{key:t.id},[e.postData.category==t.id?n("v-uni-radio",{attrs:{value:t.id,checked:"true"}}):n("v-uni-radio",{attrs:{value:t.id}}),e._v(e._s(t.text))],1)}),1)],1),n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top uni-common-mt"},[e._v("发票抬头")]),n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top"},[n("v-uni-radio-group",{staticClass:"uni-flex",attrs:{name:"type"},on:{change:function(t){t=e.$handleEvent(t),e.typeChange(t)}}},e._l(e.types,function(t){return n("v-uni-label",{key:t.id},[e.postData.type==t.id?n("v-uni-radio",{attrs:{value:t.id,checked:"true"}}):n("v-uni-radio",{attrs:{value:t.id}}),e._v(e._s(t.text))],1)}),1)],1),n("v-uni-view",{staticClass:"uni-bg-white uni-border-top"},[1==e.postData.type?n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-bg-white"},[n("v-uni-view",{staticClass:"uni-text-dark input-label"},[e._v("个人姓名")]),n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-input",{attrs:{type:"text",placeholder:"填写个人真实姓名"},model:{value:e.postData.title,callback:function(t){e.$set(e.postData,"title",t)},expression:"postData.title"}})],1)],1)],1):n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-bg-white"},[n("v-uni-view",{staticClass:"uni-text-dark input-label"},[e._v("公司名称")]),n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-input",{attrs:{type:"text",placeholder:"填写公司全称"},model:{value:e.postData.company_title,callback:function(t){e.$set(e.postData,"company_title",t)},expression:"postData.company_title"}})],1)],1),n("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-bg-white"},[n("v-uni-view",{staticClass:"uni-text-dark input-label"},[e._v("纳税识别号")]),n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-input",{attrs:{type:"text",placeholder:"填写纳税人识别号"},model:{value:e.postData.company_no,callback:function(t){e.$set(e.postData,"company_no",t)},expression:"postData.company_no"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top uni-common-mt"},[e._v("发票内容")]),n("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top"},[n("v-uni-radio-group",{staticClass:"uni-flex",attrs:{name:"info"},on:{change:function(t){t=e.$handleEvent(t),e.infoChange(t)}}},e._l(e.infos,function(t){return n("v-uni-label",{key:t.id},[e.postData.info==t.id?n("v-uni-radio",{attrs:{value:t.id,checked:"true"}}):n("v-uni-radio",{attrs:{value:t.id}}),e._v(e._s(t.text))],1)}),1),n("v-uni-view",{staticClass:"uni-text-small uni-common-pt uni-text-gray"},[e._v(e._s(e.infoText[e.postData.info]))])],1),n("v-uni-view",{staticClass:"uni-fixed-bottom uni-center uni-bg-red",on:{click:function(t){t=e.$handleEvent(t),e.saveVoice(t)}}},[e._v("保存")])],1)},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})}}]);