(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMain-user-orders"],{"0eea":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={props:{num:{type:Number|String,default:0},size:{type:String,default:"24"},nums:{type:Array,default:function(){return[]}}},data:function(){return{money:"0"}},methods:{formatNum:function(){if(this.num||0===this.num||"0"===this.num){var t=parseFloat(this.num).toFixed(2);console.log(t),this.money=" ￥"+t}},formatNums:function(){if(this.nums.length){var t=0;this.nums.forEach(function(e){console.log("formatNums =========== n",e),t+=parseFloat(e)}),console.log("formatNums =========== num",t);var e=parseFloat(t).toFixed(2);e=e.toString(),this.money=" ￥"+e}}},created:function(){this.formatNum(),this.formatNums()},watch:{num:function(t,e){console.log("newVal",t),this.formatNum()},nums:function(t,e){this.formatNums()}}};e.default=s},"1a5a":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".order-btn[data-v-58602236]{display:inline-block;padding:%?8?% %?16?%;border:%?1?% solid #999;border-radius:%?24?%;color:#999;line-height:%?32?%;margin-left:%?10?%;width:%?120?%;text-align:center;font-size:%?24?%}.order-btn-red[data-v-58602236]{color:#d81e06;border-color:#d81e06}",""])},"43e3":function(t,e,n){"use strict";n.r(e);var s=n("77b0"),i=n("c33a");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("70c4");var r=n("2877"),o=Object(r["a"])(i["default"],s["a"],s["b"],!1,null,"58602236",null);e["default"]=o.exports},"5b0e":function(t,e,n){var s=n("1a5a");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=n("4f06").default;i("7515ce66",s,!0,{sourceMap:!1,shadowMode:!1})},"70c4":function(t,e,n){"use strict";var s=n("5b0e"),i=n.n(s);i.a},"77b0":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-page-body"},[n("v-uni-view",{staticClass:"order-status-items"},[n("v-uni-view",{staticClass:"uni-flex uni-bg-white uni-common-pa uni-border-top"},t._l(t.statusItems,function(e,s){return n("v-uni-view",{key:s,staticClass:"uni-flex-item uni-center",on:{click:function(n){n=t.$handleEvent(n),t.changeStatus(e.status)}}},[t.status==e.status?n("v-uni-text",{staticClass:"uni-bold uni-text-red"},[t._v(t._s(e.text))]):n("v-uni-text",[t._v(t._s(e.text))])],1)}),1)],1),t.orderListData.count?n("v-uni-view",{},t._l(t.orderListData.list,function(e,s){return n("v-uni-view",{key:s,staticClass:"uni-bg-white uni-common-mt-md"},[n("v-uni-view",{staticClass:"uni-flex uni-common-pa",on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},[n("v-uni-view",{staticClass:"uni-flex-item"},[t._v(t._s(e.order_no))]),n("v-uni-view",{},[n("v-uni-text",{staticClass:"uni-bold"},[t._v(t._s(t.orderTypes[e.order_type]))])],1)],1),n("v-uni-view",{staticClass:"uni-border-top  uni-common-pb",on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},t._l(e.goods_items,function(s,i){return n("v-uni-view",{key:i,staticClass:"uni-flex uni-common-pl uni-common-pr uni-common-pt"},[n("v-uni-view",{staticStyle:{width:"200upx",height:"200upx"}},[n("v-uni-image",{staticStyle:{width:"200upx",height:"200upx","border-radius":"8upx"},attrs:{"lazy-load":"true",src:s.cover,mode:"scaleToFill"}})],1),n("v-uni-view",{staticClass:"uni-flex-item uni-common-pl"},[n("v-uni-view",{staticClass:"uni-ellipsis-2 uni-text-dark",staticStyle:{height:"100upx","line-height":"50upx"}},[t._v(t._s(s.title))]),e.score_use?n("v-uni-view",{staticClass:"uni-text-small uni-text-gray"},[t._v("使用积分抵扣:"),e.vip?n("money",{attrs:{num:s.price_score_vip}}):n("money",{attrs:{num:s.price_score_sell}}),n("v-uni-text",{staticClass:"uni-common-ml-sm"},[t._v("x "+t._s(s.num))])],1):n("v-uni-view",{staticClass:"uni-text-small uni-text-gray"},[t._v("未使用积分")]),n("v-uni-view",{staticClass:"uni-flex"},[e.score_use?n("v-uni-view",{staticClass:"uni-flex-item uni-text-red uni-h4"},[e.vip?n("money",{attrs:{nums:[s.price_vip],size:"36"}}):n("money",{attrs:{nums:[s.price_sell],size:"36"}})],1):n("v-uni-view",{staticClass:"uni-flex-item uni-text-red uni-h4"},[e.vip?n("money",{attrs:{nums:[s.price_vip,s.price_score_vip],size:"36"}}):n("money",{attrs:{nums:[s.price_sell,s.price_score_sell],size:"36"}})],1),n("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v("x "+t._s(s.num))])],1)],1)],1)}),1),n("v-uni-view",{staticClass:"uni-border-top uni-common-pa uni-right",on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},[e.score_use?n("v-uni-view",{staticClass:"uni-text-small uni-text-light uni-common-mr-sm uni-inline-block"},[t._v("使用积分抵扣:"),e.vip?n("money",{attrs:{num:e.score_vip}}):n("money",{attrs:{num:e.score}})],1):n("v-uni-view",{staticClass:"uni-text-small uni-text-light uni-common-mr-sm uni-inline-block"},[t._v("未使用积分抵扣")]),n("v-uni-view",{staticClass:"uni-inline-block",staticStyle:{"line-height":"1"}},[t._v("合计:"),n("v-uni-view",{staticClass:"uni-text-red uni-h3 uni-inline-block"},[e.score_use?n("v-uni-view",[e.vip?n("money",{attrs:{nums:[e.total_vip],size:"36"}}):n("money",{attrs:{nums:[e.total],size:"36"}})],1):n("v-uni-view",[e.vip?n("money",{attrs:{nums:[e.total_vip,e.score_vip],size:"36"}}):n("money",{attrs:{nums:[e.total,e.score],size:"36"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"uni-flex uni-border-top uni-common-pa uni-bg-white"},[n("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-light"},[t._v(t._s(e.create_date))]),0==e.status?n("v-uni-view",{},[n("v-uni-text",{staticClass:"order-btn",on:{click:function(n){n=t.$handleEvent(n),t.goCancel(e)}}},[t._v("取消")]),n("v-uni-text",{staticClass:"order-btn order-btn-red ",on:{click:function(n){n=t.$handleEvent(n),t.goPayment(e)}}},[t._v("去支付")])],1):t._e(),2==e.status?n("v-uni-view",{},[0==e.express_extend_num?n("v-uni-text",{staticClass:"order-btn ",on:{click:function(n){n=t.$handleEvent(n),t.goCompleteExtend(e)}}},[t._v("延长收货")]):t._e(),n("v-uni-text",{staticClass:"order-btn order-btn-red",on:{click:function(n){n=t.$handleEvent(n),t.goComplete(e)}}},[t._v("确认收货")])],1):t._e(),9==e.status?n("v-uni-view",{}):t._e(),-2==e.status?n("v-uni-view",{},[t._v("已退款")]):t._e()],1)],1)}),1):n("v-uni-view",{staticClass:"uni-common-pa uni-center"},[t._v("无数据")]),t.showLoadMore?n("v-uni-view",{staticClass:"uni-loadmore"},[t._v(t._s(t.loadMoreText))]):t._e()],1)},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})},"89f3":function(t,e,n){"use strict";n.r(e);var s=n("e41a"),i=n("d0f1");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var r=n("2877"),o=Object(r["a"])(i["default"],s["a"],s["b"],!1,null,"0ca51cda",null);e["default"]=o.exports},c33a:function(t,e,n){"use strict";n.r(e);var s=n("d3be"),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},d0f1:function(t,e,n){"use strict";n.r(e);var s=n("0eea"),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},d3be:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(n("a34a")),i=r(n("89f3")),a=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,s,i,a,r){try{var o=t[a](r),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(s,i)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(s,i){var a=t.apply(e,n);function r(t){o(a,s,i,r,u,"next",t)}function u(t){o(a,s,i,r,u,"throw",t)}r(void 0)})}}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),s.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={components:{money:i.default},data:function(){return{showLoadMore:!1,loadMoreText:"加载中...",statusItems:[{status:0,text:"待付款"},{status:1,text:"待发货"},{status:2,text:"待收货"},{status:9,text:"已完成"},{status:-1,text:"已取消"}],orderTypes:["","自营","京选"],status:0,orderListDatas:[],orderListData:{}}},computed:c({},(0,a.mapState)(["hasLogin","userDataRefresh","ordersListStatus"])),methods:{changeStatus:function(t){this.status=t,this.orderListDatas[this.status]&&0!=this.orderListDatas[this.status].list.length||this.getData(),this.orderListData=this.orderListDatas[this.status]},goToDetail:function(t){uni.navigateTo({url:"/pagesMain/user/orderDetail?id="+t.id})},goRate:function(t){uni.navigateTo({url:"/pagesUser1/user/orderRatePost?id="+t.id})},goAfter:function(t){uni.navigateTo({url:"/pagesUser1/user/orderAfterApply?id="+t.id})},goCompleteExtend:function(t){var e=this;uni.showModal({title:"延长收货",content:"确认还未收到货物延长收货时间",success:function(){var n=u(s.default.mark(function n(i){var a;return s.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!i.confirm){n.next=9;break}return console.log("用户点击确定"),n.next=4,e.$store.dispatch("mallOrderCompleteExtend",{order_id:t.id});case 4:a=n.sent,console.log("mallOrderCompleteExtend ret",a),0==a.code?(uni.showToast({icon:"success",title:"操作成功",mask:!1,duration:1500}),t.express_extend_num=1):uni.showToast({icon:"none",title:"操作成功，"+a.message,mask:!1,duration:1500}),n.next=10;break;case 9:i.cancel&&console.log("用户点击取消");case 10:case"end":return n.stop()}},n,this)}));function i(t){return n.apply(this,arguments)}return i}()})},goComplete:function(t){var e=this;uni.showModal({title:"订单完成",content:"确认收到货物完成订单",success:function(){var n=u(s.default.mark(function n(i){var a;return s.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!i.confirm){n.next=9;break}return console.log("用户点击确定"),n.next=4,e.$store.dispatch("mallOrderComplete",{order_id:t.id});case 4:a=n.sent,console.log("mallOrderComplete ret",a),0==a.code?(uni.showToast({icon:"success",title:"操作成功",mask:!1,duration:1500}),uni.startPullDownRefresh({success:function(){var t=u(s.default.mark(function t(n){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:uni.stopPullDownRefresh();case 3:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()})):uni.showToast({icon:"none",title:"操作成功，"+a.message,mask:!1,duration:1500}),n.next=10;break;case 9:i.cancel&&console.log("用户点击取消");case 10:case"end":return n.stop()}},n,this)}));function i(t){return n.apply(this,arguments)}return i}()})},goCancel:function(t){var e=this;uni.showModal({title:"取消订单",content:"确认取消当前订单",success:function(){var n=u(s.default.mark(function n(i){var a;return s.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!i.confirm){n.next=9;break}return console.log("用户点击确定"),n.next=4,e.$store.dispatch("mallOrderCancel",{order_id:t.id});case 4:a=n.sent,console.log("mallOrderCancel ret",a),0==a.code?(uni.showToast({icon:"success",title:"操作成功",mask:!1,duration:1500}),uni.startPullDownRefresh({success:function(){var t=u(s.default.mark(function t(n){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:uni.stopPullDownRefresh();case 3:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()})):uni.showToast({icon:"none",title:"操作失败，"+a.message,mask:!1,duration:1500}),n.next=10;break;case 9:i.cancel&&console.log("用户点击取消");case 10:case"end":return n.stop()}},n,this)}));function i(t){return n.apply(this,arguments)}return i}()})},goPayment:function(t){this.$store.state.mallPayment.orderIds=[t.id];var e=t.vip,n=t.score_use,s=100*t.total_vip,i=100*t.score_vip,a=100*t.total,r=100*t.score,o=e?n?s:s+i:n?a:a+r;o/=100,this.$store.state.mallPayment.totals=o;var u="/pagesMall/mall/payment";0==t.order_type&&(u+="?isVipOrder=1"),uni.redirectTo({url:u})},getData:function(){var t=u(s.default.mark(function t(){var e,n,i,a,r=this;return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={},e.status=this.status,this.orderListDatas[this.status]||(this.orderListDatas[this.status]={page:1,list:[],count:0}),n=this.orderListDatas[this.status],e.page=n.page,t.next=7,this.$store.dispatch("mallOrderListGet",e);case 7:i=t.sent,console.log("mallOrderListGet ret",JSON.stringify(i)),0==i.code&&(this.orderListDatas[this.status].page+=1,this.orderListDatas[this.status].count=i.data.count,a=i.data.rows,0==a.length&&(this.loadMoreText="无更多"),a.forEach(function(t){r.orderListDatas[r.status].list.push(t)}));case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},onLoad:function(){var t=u(s.default.mark(function t(e){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.status=e.status||0,this.$store.state.ordersListStatus=this.status,t.next=4,this.getData();case 4:console.log("onLoad =========status",this.status),this.orderListData=this.orderListDatas[this.status];case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onPullDownRefresh:function(){var t=u(s.default.mark(function t(){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.orderListDatas[this.status].page=1,this.orderListDatas[this.status].count=0,this.orderListDatas[this.status].list=[],t.next=5,this.getData();case 5:this.orderListData=this.orderListDatas[this.status],uni.stopPullDownRefresh();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onReachBottom:function(){var t=u(s.default.mark(function t(){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.showLoadMore=!0,t.next=3,this.getData();case 3:this.showLoadMore=!1;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onShow:function(){var t=u(s.default.mark(function t(){var e=this;return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("onShow =================="),this.userDataRefresh&&(console.log("onShow userDataRefresh  ====================="),this.status=this.ordersListStatus,uni.startPullDownRefresh({success:function(){var t=u(s.default.mark(function t(){return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.orderListDatas[e.status].page=1,e.orderListDatas[e.status].count=0,e.orderListDatas[e.status].list=[],t.next=5,e.getData();case 5:e.orderListData=e.orderListDatas[e.status],uni.stopPullDownRefresh(),e.$store.state.userDataRefresh=!1;case 8:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}));case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()};e.default=d},e41a:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{display:"inline"}},[n("v-uni-text",{style:{fontSize:t.size/2+"px"}},[t._v(t._s(t.money))])],1)},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})}}]);