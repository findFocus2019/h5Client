(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMain-user-orderDetail"],{"0d54":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".order-detail-bottom uni-text[data-v-0e17862b]{display:inline-block;line-height:%?60?%;height:%?60?%;margin-top:%?20?%;margin-right:%?30?%;\n  /* width: 180upx; */padding:0 %?30?%;border-radius:%?30?%;border:%?1?% solid #eee;text-align:center;margin-left:%?10?%;font-size:%?24?%;width:%?100?%}.order-detail-item-action[data-v-0e17862b]{margin-left:%?10?%;line-height:%?40?%;padding:%?10?% %?20?%;border-radius:%?30?%}",""])},"0eea":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{num:{type:Number|String,default:0},size:{type:String,default:"24"},nums:{type:Array,default:function(){return[]}}},data:function(){return{money:"0"}},methods:{formatNum:function(){if(this.num||0===this.num||"0"===this.num){var e=parseFloat(this.num).toFixed(2);console.log(e),this.money=" ￥"+e}},formatNums:function(){if(this.nums.length){var e=0;this.nums.forEach(function(t){console.log("formatNums =========== n",t),e+=parseFloat(t)}),console.log("formatNums =========== num",e);var t=parseFloat(e).toFixed(2);t=t.toString(),this.money=" ￥"+t}}},created:function(){this.formatNum(),this.formatNums()},watch:{num:function(e,t){console.log("newVal",e),this.formatNum()},nums:function(e,t){this.formatNums()}}};t.default=n},"1eab":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};t.default=n},3719:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-page-body"},[e.order.id?i("v-uni-view",{},[e.order.address?i("v-uni-view",{staticClass:"uni-common-pa uni-bg-white uni-border-top uni-flex"},[i("v-uni-view",{staticClass:"uni-common-pt"},[i("uni-icon",{attrs:{type:"location",size:"22"}})],1),i("v-uni-view",{staticClass:"uni-flex-item uni-common-pl",staticStyle:{width:"600upx"}},[i("v-uni-view",{},[i("v-uni-text",[e._v(e._s(e.order.address.name))]),i("v-uni-text",{staticClass:"uni-common-ml-sm"},[e._v(e._s(e.order.address.mobile))])],1),i("v-uni-view",{staticClass:"uni-ellipsis"},[e._v(e._s(e.order.address.address)+e._s(e.order.address.info))])],1)],1):e._e(),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[1==e.order.order_type?i("v-uni-text",[e._v("自营")]):e._e(),2==e.order.order_type?i("v-uni-text",[e._v("京选")]):e._e()],1),i("v-uni-view",{staticClass:"uni-flex-item uni-right uni-bold"},[0==e.order.status?i("v-uni-text",[e._v("待付款")]):e._e(),1==e.order.status?i("v-uni-text",[e._v("待发货")]):e._e(),2==e.order.status?i("v-uni-text",[e._v("待收货")]):e._e(),9==e.order.status?i("v-uni-text",[e._v("已完成")]):e._e()],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("订单号")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e._v(e._s(e.order.order_no))])],1),i("v-uni-view",{staticClass:"uni-border-top"},[i("v-uni-view",{staticClass:"uni-bg-white"},[i("v-uni-view",{staticClass:"uni-common-pl uni-common-pr"},e._l(e.order.goods_items,function(t,n){return i("v-uni-view",{key:n,staticClass:"uni-flex uni-border-top uni-common-pt uni-common-pb"},[i("v-uni-view",{staticStyle:{height:"160upx"}},[i("v-uni-image",{staticStyle:{width:"160upx",height:"160upx","border-radius":"8upx"},attrs:{"lazy-load":"true",src:t.cover,mode:"scaleToFill"}})],1),i("v-uni-view",{staticClass:"uni-flex-item uni-common-pl"},[i("v-uni-view",{staticClass:"uni-ellipsis-2 uni-text-darker",staticStyle:{height:"80upx","line-height":"40upx"}},[e._v(e._s(t.title))]),i("v-uni-view",{staticClass:"uni-flex "},[e.order.score_use?i("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-gray"},[i("v-uni-text",[e._v("使用积分抵扣:")]),e.order.vip?i("money",{attrs:{num:t.price_score_vip}}):i("money",{attrs:{num:t.price_score_sell}}),i("v-uni-text",{staticStyle:{"margin-left":"10upx"}},[e._v("x "+e._s(t.num))])],1):i("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-gray "},[e._v("未使用积分抵扣")])],1),i("v-uni-view",{staticClass:"uni-flex "},[i("v-uni-view",{staticClass:"uni-flex-item uni-text-red"},[e.order.score_use?i("v-uni-view",{staticClass:"uni-inline-block"},[e.order.vip?i("money",{attrs:{nums:[t.price_vip],size:"30"}}):i("money",{attrs:{nums:[t.price_sell],size:"30"}})],1):i("v-uni-view",{staticClass:"uni-inline-block"},[e.order.vip?i("money",{attrs:{nums:[t.price_vip,t.price_score_vip],size:"30"}}):i("money",{attrs:{nums:[t.price_sell,t.price_score_sell],size:"30"}})],1),i("v-uni-text",{staticStyle:{"margin-left":"10upx"}},[e._v("x")]),i("v-uni-text",{staticStyle:{"margin-left":"10upx"}},[e._v(e._s(t.num))])],1),i("v-uni-view",{staticClass:"uni-flex-item uni-right uni-text-small uni-text-light"},[9==e.order.status?i("v-uni-text",{staticClass:"uni-bg-gray order-detail-item-action",on:{click:function(i){i=e.$handleEvent(i),e.goToAfterApply({order:e.order,items:[t]})}}},[e._v("售后")]):e._e(),9==e.order.status?i("v-uni-text",{staticClass:"uni-bg-gray order-detail-item-action",on:{click:function(i){i=e.$handleEvent(i),e.goToOrderRate({order:e.order,item:t})}}},[e._v("评价")]):e._e()],1)],1)],1)],1)}))],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("下单时间")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e._v(e._s(e.order.create_date))])],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("运费")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[i("money",{attrs:{num:e.order.express_fee,size:"30"}})],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("使用积分抵扣")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e.order.score_use?i("v-uni-view",{staticClass:"uni-text-light uni-common-mr-sm uni-inline-block"},[e._v("-"),e.order.vip?i("money",{attrs:{num:e.order.score_vip,size:"30"}}):i("money",{attrs:{num:e.order.score,size:"30"}})],1):i("v-uni-view",{staticClass:"uni-text-light uni-common-mr-sm uni-inline-block"},[e._v("0")])],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("订单金额")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right uni-text-red"},[e.order.score_use?i("v-uni-view",[e.order.vip?i("money",{attrs:{nums:[e.order.total_vip],size:"30"}}):i("money",{attrs:{nums:[e.order.total],size:"30"}})],1):i("v-uni-view",[e.order.vip?i("money",{attrs:{nums:[e.order.total_vip,e.order.score_vip],size:"30"}}):i("money",{attrs:{nums:[e.order.total,e.order.score],size:"30"}})],1)],1)],1),e.order.payment?i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("支付方式")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[1==e.order.payment.type?i("v-uni-text",[e._v("代金券")]):e._e(),2==e.order.payment.type?i("v-uni-text",[e._v("账户余额")]):e._e(),3==e.order.payment.type&&"wxpay"==e.order.payment.method?i("v-uni-text",[e._v("微信支付")]):e._e(),3==e.order.payment.type&&"alipay"==e.order.payment.method?i("v-uni-text",[e._v("支付宝")]):e._e()],1)],1):e._e(),e.order.express&&2!=e.order.order_type?i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("物流信息")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e._v(e._s(e.order.express.company))])],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("物流单号")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e._v(e._s(e.order.express.express_no))])],1)],1):e._e(),2==e.order.order_type&&e.order.status>=2?i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("物流信息")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[e._v("京东物流")])],1),e._l(e.orderTracks,function(t,n){return e.orderTracks.length?i("v-uni-view",{key:n,staticClass:"uni-common-pa uni-border-top uni-bg-white"},[i("v-uni-view",{},[e._v(e._s(t.msgTime)+" "+e._s(t.content))])],1):e._e()})],2):e._e(),e.order.invoice?i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("发票类型")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[1==e.order.invoice.category?i("v-uni-text",[e._v("普通增值税发票")]):e._e()],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[i("v-uni-text",[e._v("发票抬头:")]),1==e.order.invoice.type?i("v-uni-text",[e._v("个人")]):e._e(),2==e.order.invoice.type?i("v-uni-text",[e._v("公司")]):e._e()],1),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[1==e.order.invoice.type?i("v-uni-text",[e._v(e._s(e.order.invoice.title))]):e._e(),2==e.order.invoice.type?i("v-uni-text",[e._v(e._s(e.order.invoice.company_title))]):e._e()],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top uni-bg-white uni-flex"},[i("v-uni-view",{},[e._v("发票内容")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right uni-text-small uni-text-gray"},[1==e.order.invoice.info?i("v-uni-text",[e._v("发票内容显示详细商品名称及价格信息")]):e._e(),2==e.order.invoice.info?i("v-uni-text",[e._v("发票内容显示商品类别及价格信息")]):e._e()],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"uni-common-pt",staticStyle:{height:"100upx"}}),i("v-uni-view",{staticClass:"uni-fixed-bottom uni-bg-white uni-right order-detail-bottom uni-common-pr uni-border-top"},[0==e.order.status?i("v-uni-view",{},[i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.goCancel(e.order)}}},[e._v("取消")]),i("v-uni-text",{staticClass:"uni-bg-red",on:{click:function(t){t=e.$handleEvent(t),e.goPayment(e.order)}}},[e._v("去支付")])],1):e._e(),2==e.order.status?i("v-uni-view",{},[i("v-uni-text",{staticClass:"order-btn",on:{click:function(t){t=e.$handleEvent(t),e.goComplete(e.order)}}},[e._v("确认收货")])],1):e._e(),9==e.order.status?i("v-uni-view",{},[i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.goToAfterApply({order:e.order,items:e.order.goods_items})}}},[e._v("申请售后")])],1):e._e()],1)],1):i("v-uni-view",{staticClass:"uni-common-pa uni-center"},[e._v("未找到订单")])],1)},r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},"620f":function(e,t,i){var n=i("0d54");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=i("4f06").default;r("3cabcd6a",n,!0,{sourceMap:!1,shadowMode:!1})},"63c7":function(e,t,i){"use strict";i.r(t);var n=i("1eab"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=r.a},"6bc5":function(e,t,i){"use strict";var n=i("620f"),r=i.n(n);r.a},"7efa":function(e,t,i){"use strict";i.r(t);var n=i("fde5"),r=i("63c7");for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);var o=i("2877"),u=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=u.exports},"89f3":function(e,t,i){"use strict";i.r(t);var n=i("e41a"),r=i("d0f1");for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);var o=i("2877"),u=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"0ca51cda",null);t["default"]=u.exports},aef8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("a34a")),r=o(i("7efa")),s=o(i("89f3"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,i,n,r,s,o){try{var u=e[s](o),a=u.value}catch(c){return void i(c)}u.done?t(a):Promise.resolve(a).then(n,r)}function a(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var s=e.apply(t,i);function o(e){u(s,n,r,o,a,"next",e)}function a(e){u(s,n,r,o,a,"throw",e)}o(void 0)})}}var c={components:{uniIcon:r.default,money:s.default},data:function(){return{order:{},orderTracks:[],items:[]}},methods:{goToComment:function(){uni.navigateTo({url:"/pagesUser1/user/orderRatePost"})},goToOrderRate:function(e){e.order;var t=e.item,i=0;console.log("goToOrderRate ",this.items),this.items.forEach(function(e){e.goods_id==t.id&&(i=e.id)}),uni.navigateTo({url:"/pagesUser1/user/orderRatePost?id="+i})},goToAfterApply:function(e){var t=e.order,i=e.items;this.$store.state.mallAfterData.order=t,this.$store.state.mallAfterData.goodsItems=i,uni.navigateTo({url:"/pagesUser1/user/orderAfterApply"})},goComplete:function(e){var t=this;uni.showModal({title:"订单完成",content:"确认收到货物完成订单",success:function(){var i=a(n.default.mark(function i(r){var s;return n.default.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(!r.confirm){i.next=9;break}return console.log("用户点击确定"),i.next=4,t.$store.dispatch("mallOrderComplete",{order_id:e.id});case 4:s=i.sent,console.log("mallOrderComplete ret",s),0==s.code?(uni.showToast({icon:"success",title:"操作成功",mask:!1,duration:1500}),t.$store.state.userDataRefresh=!0,uni.startPullDownRefresh({success:function(){var e=a(n.default.mark(function e(i){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:uni.stopPullDownRefresh();case 3:case"end":return e.stop()}},e,this)}));function i(t){return e.apply(this,arguments)}return i}()})):uni.showToast({icon:"none",title:"操作成功，"+s.message,mask:!1,duration:1500}),i.next=10;break;case 9:r.cancel&&console.log("用户点击取消");case 10:case"end":return i.stop()}},i,this)}));function r(e){return i.apply(this,arguments)}return r}()})},goCancel:function(e){var t=this;uni.showModal({title:"取消订单",content:"确认取消当前订单",success:function(){var i=a(n.default.mark(function i(r){var s;return n.default.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(!r.confirm){i.next=9;break}return console.log("用户点击确定"),i.next=4,t.$store.dispatch("mallOrderCancel",{order_id:e.id});case 4:s=i.sent,console.log("mallOrderCancel ret",s),0==s.code?(uni.showToast({icon:"success",title:"取消订单成功",mask:!1,duration:1500}),setTimeout(function(){t.$store.state.userDataRefresh=!0,uni.navigateBack({delta:1})},1500)):uni.showToast({icon:"none",title:"取消订单失败，"+s.message,mask:!1,duration:1500}),i.next=10;break;case 9:r.cancel&&console.log("用户点击取消");case 10:case"end":return i.stop()}},i,this)}));function r(e){return i.apply(this,arguments)}return r}()})},goPayment:function(e){this.$store.state.mallPayment.orderIds=[e.id];var t=e.vip,i=e.score_use,n=100*e.total_vip,r=100*e.score_vip,s=100*e.total,o=100*e.score,u=t?i?n:n+r:i?s:s+o;u/=100,this.$store.state.mallPayment.totals=u,uni.redirectTo({url:"/pagesMall/mall/payment"})},getData:function(){var e=a(n.default.mark(function e(){var t;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("mallOrderInfoGet",{order_id:this.order.id});case 2:t=e.sent,console.log("mallOrderInfoGet ret",JSON.stringify(t),t),0==t.code?(this.order=t.data.info,this.items=t.data.items):this.order={};case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},onLoad:function(){var e=a(n.default.mark(function e(t){var i,r;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.id,this.order.id=i,e.next=4,this.getData();case 4:if(!(2==this.order.order_type&&this.order.status>=2)){e.next=11;break}return console.log(this.order),e.next=8,this.$store.dispatch("getJdExpress",{jdOrderId:this.order.jd_order_id});case 8:r=e.sent,console.log("expressRet========"+JSON.stringify(r),r),this.orderTracks=r.data.orderTrack||[];case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onPullDownRefresh:function(){var e=a(n.default.mark(function e(){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:uni.stopPullDownRefresh();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()};t.default=c},d0f1:function(e,t,i){"use strict";i.r(t);var n=i("0eea"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=r.a},d2e7:function(e,t,i){"use strict";i.r(t);var n=i("aef8"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=r.a},df99:function(e,t,i){"use strict";i.r(t);var n=i("3719"),r=i("d2e7");for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);i("6bc5");var o=i("2877"),u=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"0e17862b",null);t["default"]=u.exports},e41a:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticStyle:{display:"inline"}},[i("v-uni-text",{style:{fontSize:e.size/2+"px"}},[e._v(e._s(e.money))])],1)},r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},fde5:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-icon",class:["uni-icon-"+e.type],style:{color:e.color,"font-size":e.fontSize},on:{click:function(t){t=e.$handleEvent(t),e.onClick()}}})},r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})}}]);