(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesUser1-user-orderAfterApply"],{"0eea":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{num:{type:Number,default:0},size:{type:String,default:"24"},nums:{type:Array,default:function(){return[]}}},data:function(){return{money:0}},methods:{formatNum:function(){if(this.num||0===this.num||"0"===this.num){var t=this.num.toString();console.log(t);var e=t.split(".");1==e.length?this.money="￥"+t+".00":(this.money="￥"+e[0]+".",1==e[1].length?this.money+=e[1]+"0":this.money+=e[1])}},formatNums:function(){if(this.nums.length){var t=0;this.nums.forEach(function(e){t+=parseInt(100*e)});var e=t/100;e=e.toString(),console.log(e);var i=e.split(".");1==i.length?this.money="￥"+e+".00":(this.money="￥"+i[0]+".",1==i[1].length?this.money+=i[1]+"0":this.money+=i[1])}}},created:function(){this.formatNum(),this.formatNums()},watch:{num:function(t,e){console.log("newVal",t),this.formatNum()},nums:function(t,e){this.formatNums()}}};e.default=n},"1eab":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=n},"1f34":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".btn-upload[data-v-d8a81462]{display:inline-block;width:%?100?%;height:%?100?%;border:%?1?% dashed #999;text-align:center;line-height:%?100?%}.imgs-pre-item[data-v-d8a81462]{width:%?100?%;height:%?100?%;border:%?1?% solid #eee;border-radius:%?4?%}",""])},"337d":function(t,e,i){"use strict";var n=i("792b"),s=i.n(n);s.a},"384d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("a34a")),s=i("2f62"),a=r(i("57e2")),u=r(i("7efa")),o=r(i("89f3"));function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e,i,n,s,a,u){try{var o=t[a](u),r=o.value}catch(c){return void i(c)}o.done?e(r):Promise.resolve(r).then(n,s)}function l(t){return function(){var e=this,i=arguments;return new Promise(function(n,s){var a=t.apply(e,i);function u(t){c(a,n,s,u,o,"next",t)}function o(t){c(a,n,s,u,o,"throw",t)}u(void 0)})}}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){v(t,e,i[e])})}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={components:{uniIcon:u.default,money:o.default},data:function(){return{postData:{order_id:0,goods_ids:[],type:"",category:"",imgs:[],info:""},order:{},goodsItems:[],categorys:["退货","换货","其他"],types:["缺件，少件","商品降价","发错货","质量问题","商品与页面描述不符","其他"],imgs:[]}},computed:f({},(0,s.mapState)(["mallAfterData"])),methods:{chooseType:function(){var t=this;uni.showActionSheet({itemList:this.types,success:function(e){var i=e.tapIndex;t.postData.type=t.types[i]}})},chooseCategory:function(){var t=this;uni.showActionSheet({itemList:this.categorys,success:function(e){var i=e.tapIndex;t.postData.category=t.categorys[i]}})},preImg:function(t,e){uni.previewImage({urls:t,current:e,indicator:"number"})},uploadImgs:function(){var t=this;uni.chooseImage({count:6,success:function(e){var i=e.tempFiles,n=[];t.imgs=[],i.forEach(function(e,i){e.size>5242880?n.push(i+1):t.imgs.push(e.path),n.length&&uni.showToast({icon:"none",title:"第"+n.join(",")+"张图片大小超过限制"})})}})},doUploadFile:function(){var t=l(n.default.mark(function t(e){var i;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.upload(e);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),confirm:function(){var t=l(n.default.mark(function t(){var e,i,s,a,u;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.postData.type){t.next=3;break}return uni.showToast({icon:"none",title:"请选择售后申请原因"}),t.abrupt("return");case 3:uni.showLoading({mask:!0,title:"数据提交中"}),this.postData.imgs=[],e=0;case 6:if(!(e<this.imgs.length)){t.next=15;break}return i=this.imgs[e],t.next=10,this.doUploadFile(i);case 10:s=t.sent,this.postData.imgs.push(s);case 12:e++,t.next=6;break;case 15:return a=this.postData,t.next=18,this.$store.dispatch("mallOrderAfterApply",a);case 18:u=t.sent,uni.hideLoading(),0==u.code?(uni.showToast({icon:"success",title:"提交成功"}),uni.redirectTo({url:"/pagesUser1/user/orderAfters"})):uni.showToast({icon:"none",title:"提交失败，"+u.message});case 21:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},onLoad:function(){var t=this.mallAfterData;console.log("onLoad",t),this.order=t.order,this.goodsItems=t.goodsItems,this.postData.order_id=t.order.id;var e=[];t.goodsItems.forEach(function(t){e.push(t.id)}),this.postData.goods_ids=e,parseInt(Date.now()/1e3)-this.order.update_time>604800&&this.categorys.splice(0,1)}};e.default=d},"3d42":function(t,e,i){"use strict";i.r(e);var n=i("384d"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},"5b6a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{display:"inline"}},[i("v-uni-text",{style:{fontSize:t.size/2+"px"}},[t._v(t._s(t.money))])],1)},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},"63c7":function(t,e,i){"use strict";i.r(e);var n=i("1eab"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},"792b":function(t,e,i){var n=i("1f34");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("4f06").default;s("64358bdb",n,!0,{sourceMap:!1,shadowMode:!1})},"7efa":function(t,e,i){"use strict";i.r(e);var n=i("fde5"),s=i("63c7");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);var u=i("2877"),o=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},"89f3":function(t,e,i){"use strict";i.r(e);var n=i("5b6a"),s=i("d0f1");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);var u=i("2877"),o=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,"78d59df4",null);e["default"]=o.exports},9216:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-page-body"},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"uni-bg-white uni-border-top"},[i("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-border-bottom"},[i("v-uni-view",{staticClass:"uni-flex-item"},[i("v-uni-text",[t._v("订单号:")]),i("v-uni-text",{staticClass:"uni-text-gray"},[t._v(t._s(t.order.order_no))])],1),i("v-uni-view",{staticClass:"uni-right"})],1),i("v-uni-view",{},t._l(t.goodsItems,function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-flex uni-common-pa "},[i("v-uni-view",{staticStyle:{width:"200upx",height:"200upx"}},[i("v-uni-image",{staticStyle:{width:"200upx",height:"200upx","border-radius":"8upx"},attrs:{"lazy-load":"true",src:e.cover,mode:"scaleToFill"}})],1),i("v-uni-view",{staticClass:"uni-flex-item uni-common-pl"},[i("v-uni-view",{staticClass:"uni-ellipsis-2 uni-text-dark",staticStyle:{height:"100upx","line-height":"50upx"}},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"uni-text-small uni-text-gray"},[t.order.score_use?i("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-gray"},[i("v-uni-text",[t._v("使用积分抵扣:")]),t.order.vip?i("money",{attrs:{num:e.price_score_vip}}):i("money",{attrs:{num:e.price_score_sell}}),i("v-uni-text",{staticClass:"uni-common-pl"},[t._v("x "+t._s(e.num))])],1):i("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-gray "},[t._v("未使用积分抵扣")])],1),i("v-uni-view",{staticClass:"uni-flex"},[i("v-uni-view",{staticClass:"uni-flex-item uni-text-red uni-h4"},[t.order.vip?i("money",{attrs:{nums:[e.price_vip,e.price_score_vip],size:"30"}}):i("money",{attrs:{nums:[e.price_sell,e.price_score_sell],size:"30"}})],1),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v("x "+t._s(e.num))])],1)],1)],1)})),i("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-border-top"},[i("v-uni-view",{staticClass:"uni-flex-item"},[i("v-uni-text",{staticClass:"uni-text-dark uni-bold"},[t._v("售后类别:")])],1),i("v-uni-view",{staticClass:"uni-right",on:{click:function(e){e=t.$handleEvent(e),t.chooseCategory(e)}}},[i("v-uni-text",{staticClass:"uni-text-gray uni-text-small"},[t._v(t._s(t.postData.category))]),i("uni-icon",{attrs:{type:"arrowright",size:"22"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-common-pa uni-border-top"},[i("v-uni-view",{staticClass:"uni-flex-item"},[i("v-uni-text",{staticClass:"uni-text-dark uni-bold"},[t._v("申请原因:")])],1),i("v-uni-view",{staticClass:"uni-right",on:{click:function(e){e=t.$handleEvent(e),t.chooseType(e)}}},[i("v-uni-text",{staticClass:"uni-text-gray uni-text-small"},[t._v(t._s(t.postData.type))]),i("uni-icon",{attrs:{type:"arrowright",size:"22"}})],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:"uni-text-dark uni-bold"},[t._v("详细描述:")])],1),i("v-uni-view",{staticClass:"uni-bg-gray uni-common-pa uni-common-mt-sm"},[i("v-uni-textarea",{staticClass:" ",staticStyle:{width:"100%"},attrs:{placeholder:"请输入申请原因详细描述","placeholder-class":"uni-text-small"},model:{value:t.postData.info,callback:function(e){t.$set(t.postData,"info",e)},expression:"postData.info"}})],1)],1),i("v-uni-view",{staticClass:"uni-common-pa uni-border-top"},[i("v-uni-view",{},[i("v-uni-view",{},[t._v("上传图片")]),i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-view",{staticClass:"btn-upload",on:{click:function(e){e=t.$handleEvent(e),t.uploadImgs(e)}}},[i("uni-icon",{attrs:{type:"camera",size:"24"}})],1)],1),i("v-uni-view",{staticClass:"uni-common-mt uni-flex"},t._l(t.imgs,function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-common-mr-sm imgs-pre-item",on:{click:function(i){i=t.$handleEvent(i),t.preImg(t.rate.imgs,e)}}},[i("v-uni-image",{staticStyle:{width:"100upx",height:"100upx"},attrs:{"lazy-load":"true",src:e,mode:"scaleToFill"}})],1)}))],1)],1)],1),i("v-uni-view",{staticClass:"uni-common-pa",on:{click:function(e){e=t.$handleEvent(e),t.confirm(e)}}},[i("v-uni-button",{staticClass:"uni-border-btn-radius",attrs:{type:"warn"}},[t._v("提交")])],1),i("v-uni-view",{staticClass:"uni-common-pa uni-left uni-text-gray uni-text-small"},[i("v-uni-view",{},[t._v("1.提交成功后将会有工作人员在24小时内与您进行联系办理售后事宜")]),i("v-uni-view",{},[t._v("2.商品在收货7个工作日内可进行退货操作")])],1)],1)],1)},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},"9fb6":function(t,e,i){"use strict";i.r(e);var n=i("9216"),s=i("3d42");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);i("337d");var u=i("2877"),o=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,"d8a81462",null);e["default"]=o.exports},d0f1:function(t,e,i){"use strict";i.r(e);var n=i("0eea"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},fde5:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-icon",class:["uni-icon-"+t.type],style:{color:t.color,"font-size":t.fontSize},on:{click:function(e){e=t.$handleEvent(e),t.onClick()}}})},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})}}]);