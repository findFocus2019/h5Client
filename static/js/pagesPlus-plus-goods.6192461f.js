(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesPlus-plus-goods"],{"0eea":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{num:{type:Number|String,default:0},size:{type:String,default:"24"},nums:{type:Array,default:function(){return[]}}},data:function(){return{money:"0"}},methods:{formatNum:function(){if(this.num||0===this.num||"0"===this.num){var t=parseFloat(this.num).toFixed(2);console.log(t),this.money=" ￥"+t}},formatNums:function(){if(this.nums.length){var t=0;this.nums.forEach(function(e){console.log("formatNums =========== n",e),t+=parseFloat(e)}),console.log("formatNums =========== num",t);var e=parseFloat(t).toFixed(2);e=e.toString(),this.money=" ￥"+e}}},created:function(){this.formatNum(),this.formatNums()},watch:{num:function(t,e){console.log("newVal",t),this.formatNum()},nums:function(t,e){this.formatNums()}}};e.default=i},"24fc":function(t,e,n){"use strict";n.r(e);var i=n("3967"),a=n("d501");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var r=n("2877"),o=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"6abcb044",null);e["default"]=o.exports},3967:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-page-body"},[t.listData.count?n("v-uni-view",{},t._l(t.listData.list,function(e,i){return n("v-uni-view",{key:i,staticClass:"uni-common-mt-md uni-bg-white"},[n("v-uni-view",{on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:e.cover,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"uni-common-pa"},[n("v-uni-view",{staticClass:"uni-bold uni-h4",on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},[t._v(t._s(e.title))]),n("v-uni-view",{staticClass:"uni-flex"},[n("v-uni-view",{staticClass:"uni-flex-item",on:{click:function(n){n=t.$handleEvent(n),t.goToDetail(e)}}},[n("v-uni-view",{staticClass:"uni-flex uni-common-mt-sm"},[n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-text",[t._v("价格")]),n("v-uni-view",{staticClass:"uni-text-red uni-inline-block"},[n("money",{attrs:{nums:[e.price_sell,e.price_score_sell],size:"36"}})],1)],1),n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-text",[t._v("单件奖励")]),n("v-uni-view",{staticClass:"uni-text-green uni-inline-block"},[n("money",{attrs:{num:(e.price_sell-e.price_cost)/2,size:"36"}})],1)],1)],1),n("v-uni-view",{staticClass:"uni-flex"},[n("v-uni-view",{staticClass:"uni-flex-item"},[n("v-uni-text",[t._v("库存:")]),n("v-uni-text",[t._v(t._s(e.stock>=0?e.stock:"充足"))])],1),n("v-uni-view",{staticClass:"uni-flex-item"},[t._v("已有"+t._s(e.sales)+"人付款")])],1)],1),n("v-uni-view",{staticClass:"uni-right",on:{click:function(n){n=t.$handleEvent(n),t.goodsShare(e)}}},[n("v-uni-view",{staticClass:" uni-center uni-bold uni-inline-block",staticStyle:{color:"#ffffff",background:"#7798ff",padding:"20upx",width:"80upx",height:"80upx","line-height":"40upx","border-radius":"100%",border:"10upx solid #e4eaff"}},[t._v("一键代言")])],1)],1)],1)],1)})):n("v-uni-view",{}),t.showLoadMore?n("v-uni-view",{staticClass:"uni-loadmore"},[t._v(t._s(t.loadMoreText))]):t._e()],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"89f3":function(t,e,n){"use strict";n.r(e);var i=n("e41a"),a=n("d0f1");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var r=n("2877"),o=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"0ca51cda",null);e["default"]=o.exports},b3f3:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(){i(this,t)}return s(t,[{key:"qq",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;uni.share({provider:"qq",type:0,title:t.title,summary:t.description,href:t.href,imageUrl:t.imgUrl,success:function(t){console.log("success:"+JSON.stringify(t)),e&&e()},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}},{key:"wx",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;uni.share({provider:"weixin",scene:0==e?"WXSceneSession":"WXSenceTimeline",type:0,title:t.title,summary:t.description,href:t.href,imageUrl:t.imgUrl,success:function(t){console.log("success:"+JSON.stringify(t)),n&&n()},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}},{key:"mini",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("mini data：",JSON.stringify(t)),uni.share({provider:"weixin",scene:"WXSceneSession",type:5,title:t.title,summary:t.description,href:t.href,imageUrl:t.imgUrl,miniProgram:{id:t.miniAppId,path:t.miniPage,type:0,webUrl:t.href},success:function(t){console.log("success:"+JSON.stringify(t)),e&&e()},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}}]),t}(),o=new r;e.default=o},d0f1:function(t,e,n){"use strict";n.r(e);var i=n("0eea"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},d501:function(t,e,n){"use strict";n.r(e);var i=n("d8bc"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},d8bc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=n("2f62"),s=o(n("b3f3")),r=o(n("89f3"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,a,s,r){try{var o=t[s](r),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var s=t.apply(e,n);function r(t){u(s,i,a,r,o,"next",t)}function o(t){u(s,i,a,r,o,"throw",t)}r(void 0)})}}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){f(t,e,n[e])})}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={components:{money:r.default},data:function(){return{listData:{page:1,count:0,list:[],timestamp:0},showLoadMore:!1,loadMoreText:"加载中..."}},computed:l({},(0,a.mapState)(["hasLogin","userInfo","userShareGoodsData","miniAppId","miniAppOrId","webDomain"])),methods:{getData:function(){var t=c(i.default.mark(function t(){var e,n,a,s,r,o=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userShareGoodsData.page||1,n=this.userShareGoodsData.timestamp||0,a={page:e,timestamp:n,is_share:1},t.next=5,this.$store.dispatch("getGooddList",a);case 5:return s=t.sent,console.log("getGoodsList ret",JSON.stringify(s)),0==s.code&&(this.userShareGoodsData.count=s.data.count,this.userShareGoodsData.timestamp=s.data.timestamp,this.userShareGoodsData.page+=1,r=s.data.rows,0==r.length&&(this.loadMoreText="无更多..."),r.forEach(function(t){o.userShareGoodsData.list.push(t)})),t.abrupt("return",s);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),goToDetail:function(t){uni.navigateTo({url:"/pagesMall/mall/goods?id="+t.id})},refresh:function(){var t=c(i.default.mark(function t(){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("refresh =============="),this.userShareGoodsData.page=1,this.userShareGoodsData.list=[],this.userShareGoodsData.count=0,t.next=6,this.getData();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),goodsShare:function(){var t=c(i.default.mark(function t(e){var n,a,r,o,u,c,l,f;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return uni.navigateTo({url:"/pages/auth/guide"}),t.abrupt("return");case 5:return n=0,a={},a.category="goods",a.post_id=0,a.goods_id=e.id||0,t.next=12,this.$store.dispatch("userShareInfoGet",a);case 12:if(r=t.sent,0!=r.code){t.next=18;break}o=r.data.info,n=o.id,t.next=20;break;case 18:return uni.showToast({icon:"none",title:"分享发生错误，请稍后重试"}),t.abrupt("return");case 20:u="pagesMall/mall/goods",u=u+"?id="+e.id+"&puid="+this.userInfo.user_id+"&share_id="+n,c=this.webDomain+"/"+u,l="https://img-juren.oss-cn-shenzhen.aliyuncs.com/assets/images/share.png",console.log("分享 ：",c),f={title:e.title,description:e.description,href:c,imgUrl:l,miniAppId:this.miniAppOrId,miniPage:u},console.log("share shareData",JSON.stringify(f)),uni.showActionSheet({itemList:["分享给QQ好友","分享到微信朋友圈","分享到微信好友"],success:function(t){var e=t.tapIndex;0==e?s.default.qq(f):1==e?s.default.wx(f,1):2==e&&s.default.wx(f,0)}});case 28:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},onPullDownRefresh:function(){var t=c(i.default.mark(function t(){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.refresh();case 2:uni.stopPullDownRefresh();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onReachBottom:function(){var t=c(i.default.mark(function t(){var e=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.showLoadMore=!0,t.next=3,this.getData();case 3:setTimeout(function(){e.showLoadMore=!1},1e3);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onLoad:function(){this.listData=this.userShareGoodsData,this.listData.list&&0!=this.listData.list.length||this.getData()}};e.default=d},e41a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{display:"inline"}},[n("v-uni-text",{style:{fontSize:t.size/2+"px"}},[t._v(t._s(t.money))])],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}}]);