(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesMall-mall-cart"],{"1b41":function(t,e,i){"use strict";i.r(e);var n=i("975e"),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=r.a},"1eab":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=n},"53e5":function(t,e,i){"use strict";var n=i("6f0b"),r=i.n(n);r.a},"63c7":function(t,e,i){"use strict";i.r(e);var n=i("1eab"),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=r.a},6592:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".scroll-view_H[data-v-3cd9bc1c]{white-space:nowrap;height:%?240?%;width:100%}.scroll-view-item[data-v-3cd9bc1c]{height:%?240?%;text-align:center}.scroll-view-item_H[data-v-3cd9bc1c]{display:inline-block;width:100%;height:%?240?%;line-height:%?240?%}.scroll-view-item_H.delete[data-v-3cd9bc1c]{width:%?100?%;background:#d81e06;color:#fff}.cart-list .cart-list-check[data-v-3cd9bc1c]{width:%?100?%;line-height:%?240?%}.cart-list .cart-list-cover[data-v-3cd9bc1c]{width:%?180?%}.cart-list .cart-list-item[data-v-3cd9bc1c]{width:%?470?%;line-height:%?75?%;white-space:normal}.cart-list-title[data-v-3cd9bc1c]{height:%?80?%;word-break:break-all;display:-webkit-box;overflow:hidden;line-height:%?40?%;-o-text-overflow:ellipsis;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.cart-toolbar[data-v-3cd9bc1c]{position:fixed;bottom:0;width:100%;height:%?100?%;line-height:%?100?%;background:#fff}",""])},"6f0b":function(t,e,i){var n=i("6592");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("4f06").default;r("48e3d7a7",n,!0,{sourceMap:!1,shadowMode:!1})},"7efa":function(t,e,i){"use strict";i.r(e);var n=i("fde5"),r=i("63c7");for(var s in r)"default"!==s&&function(t){i.d(e,t,function(){return r[t]})}(s);var c=i("2877"),a=Object(c["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},8709:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[t.cartInfo&&0===t.cartInfo.count?i("v-uni-view",{staticClass:"uni-center uni-common-mt"},[t._v("购物车什么都没有~")]):t._e(),t._l(t.cartInfo.list,function(e,n){return i("v-uni-view",{key:n},[e.length?i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-view",{staticClass:"uni-bg-white uni-border-top uni-common-pa uni-flex"},[i("v-uni-view",{staticStyle:{width:"70upx"},on:{click:function(e){e=t.$handleEvent(e),t.cartCheckType(n)}}},[t.cartInfo.checkAllType[n]?i("uni-icon",{attrs:{type:"checkbox-filled",size:"22",color:"#d81e06"}}):i("uni-icon",{attrs:{type:"circle",size:"22"}})],1),i("v-uni-view",{staticClass:"uni-h4 uni-flex-item"},[1==n?i("v-uni-view",{},[t._v("自营商城")]):t._e(),2==n?i("v-uni-view",{},[t._v("京选商城")]):t._e()],1)],1),t._l(e,function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-bg-white uni-border-top"},[i("v-uni-scroll-view",{staticClass:"scroll-view_H cart-list",attrs:{"scroll-x":"true","scroll-left":"0"},on:{scroll:function(e){e=t.$handleEvent(e),t.scroll(e)}}},[i("v-uni-view",{staticClass:"scroll-view-item_H"},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"uni-flex"},[null===e.check?i("v-uni-view",{staticClass:"cart-list-check uni-flex-item uni-center uni-text-small"},[t._v("无货")]):i("v-uni-view",{staticClass:"cart-list-check uni-flex-item uni-center",on:{click:function(i){i=t.$handleEvent(i),t.cartCheck(e)}}},[e.check?i("uni-icon",{attrs:{type:"checkbox-filled",size:"22",color:"#d81e06"}}):i("uni-icon",{attrs:{type:"circle",size:"22"}})],1),i("v-uni-view",{staticClass:"cart-list-cover uni-common-pt uni-flex-item"},[i("v-uni-image",{staticStyle:{width:"180upx",height:"180upx"},attrs:{"lazy-load":"true",src:e.cover,mode:""}})],1),i("v-uni-view",{staticClass:"uni-flex-item uni-common-pt uni-common-pl uni-common-pr cart-list-item"},[i("v-uni-view",{staticClass:" cart-list-title uni-bold",staticStyle:{width:"410upx"}},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"uni-flex"},[i("v-uni-view",{staticClass:"uni-flex-item uni-text-small uni-text-gray"},[t._v("积分可抵扣:"),t.isVip?i("money",{attrs:{num:e.price_score_vip,size:"24"}}):i("money",{attrs:{num:e.price_score_sell,size:"24"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex"},[i("v-uni-view",{staticClass:"uni-text-red uni-flex-item"},[t.isVip?i("money",{attrs:{num:e.price_vip,size:"36"}}):i("money",{attrs:{num:e.price_sell,size:"36"}})],1),i("v-uni-view",{staticClass:"uni-right uni-flex-item"},[i("uni-number-box",{attrs:{value:e.num,cartItem:e},on:{change:function(e){e=t.$handleEvent(e),t.onNumberChange(e)}}})],1)],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"scroll-view-item_H uni-center",staticStyle:{background:"#d81e06",width:"100upx",color:"#fff"},on:{click:function(i){i=t.$handleEvent(i),t.cartDel(e)}}},[i("v-uni-view",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[i("v-uni-view",{},[i("uni-icon",{attrs:{type:"trash",size:"24"}})],1),i("v-uni-view",{},[t._v("删除")])],1)],1)],1)],1)})],2):t._e(),2==n&&e.length?i("v-uni-view",{staticClass:"uni-bg-white"},[t.userAddressCurrent.id?i("user-address",{attrs:{address:t.userAddressCurrent}}):t._e(),i("v-uni-view",{staticClass:"uni-common-pa uni-flex uni-border-top"},[i("v-uni-view",{staticClass:"uni-flex-item"},[t._v("运费")]),i("v-uni-view",{staticClass:"uni-right"},[t.priceExpress?i("v-uni-view",{},[i("money",{attrs:{num:t.priceExpress}})],1):t._e(),0===t.priceExpress?i("v-uni-view",{},[t._v("0")]):t._e(),""===t.priceExpress?i("v-uni-view",{},[t._v("未获取")]):t._e()],1)],1)],1):t._e()],1)}),i("v-uni-view",{staticClass:"cart-toolbar uni-flex uni-center uni-bg-white"},[i("v-uni-view",{staticClass:"uni-flex"},[i("v-uni-view",{staticStyle:{width:"70upx","line-height":"100upx"},on:{click:function(e){e=t.$handleEvent(e),t.cartCheckAll(e)}}},[t.cartInfo.checkAll?i("uni-icon",{attrs:{type:"checkbox-filled",size:"22",color:"#d81e06"}}):i("uni-icon",{attrs:{type:"circle",size:"22"}})],1),i("v-uni-view",{staticStyle:{"line-height":"100upx"}},[t._v("全选")])],1),i("v-uni-view",{staticClass:"uni-flex-item uni-left uni-common-pl"},[i("v-uni-view",{staticStyle:{"line-height":"50upx"}},[i("v-uni-text",[t._v("总计:")]),i("v-uni-view",{staticClass:"uni-text-red uni-inline-block"},[t.isVip?i("money",{attrs:{num:t.cartInfo.totalVip,size:"32"}}):i("money",{attrs:{num:t.cartInfo.total,size:"32"}})],1)],1),i("v-uni-view",{staticStyle:{"line-height":"50upx"}},[i("v-uni-text",{staticClass:"uni-text-small uni-text-gray"},[t._v("积分可抵扣:")]),i("v-uni-view",{staticClass:"uni-text-small uni-text-gray uni-inline-block"},[t.isVip?i("money",{attrs:{num:t.cartInfo.scoreVip,size:"24"}}):i("money",{attrs:{num:t.cartInfo.score,size:"24"}})],1)],1)],1),i("v-uni-view",{staticClass:"uni-center uni-common-pr",on:{click:function(e){e=t.$handleEvent(e),t.cartToOrder(e)}}},[i("v-uni-view",{staticClass:"uni-bg-red",staticStyle:{"border-radius":"50upx",height:"60upx","margin-top":"20upx","line-height":"60upx",width:"100upx"}},[t._v("结算")])],1)],1)],2)},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},"8bd0":function(t,e,i){"use strict";i.r(e);var n=i("8709"),r=i("1b41");for(var s in r)"default"!==s&&function(t){i.d(e,t,function(){return r[t]})}(s);i("53e5");var c=i("2877"),a=Object(c["a"])(r["default"],n["a"],n["b"],!1,null,"3cd9bc1c",null);e["default"]=a.exports},"975e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i("a34a")),r=i("2f62"),s=l(i("bbf7")),c=l(i("23c67")),a=l(i("7efa")),u=l(i("89f3")),o=l(i("0264"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e,i,n,r,s,c){try{var a=t[s](c),u=a.value}catch(o){return void i(o)}a.done?e(u):Promise.resolve(u).then(n,r)}function d(t){return function(){var e=this,i=arguments;return new Promise(function(n,r){var s=t.apply(e,i);function c(t){f(s,n,r,c,a,"next",t)}function a(t){f(s,n,r,c,a,"throw",t)}c(void 0)})}}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){v(t,e,i[e])})}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p={data:function(){return{cartInfo:{},priceExpress:""}},components:{uniNumberBox:c.default,uniIcon:a.default,money:u.default,userAddress:o.default},computed:h({},(0,r.mapState)(["hasLogin","isVip","mallOrderConfirm","userAddressList","userAddressCurrent"])),methods:h({},(0,r.mapActions)(["goToLoginPage"]),{scroll:function(t){console.log(t)},onNumberChange:function(){var t=d(n.default.mark(function t(e){var i,r,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onNumberChange:",e),i=e.item,r=i.num-e.val,r>0?s.default.minus(i,r):r<0&&s.default.plus(i,-r),t.next=6,this.getStockJd(i.uuid,i.num);case 6:c=t.sent,c?s.default.check(i,i.check||!1):s.default.check(i,null),this.cartInfo=s.default.info(),this.getFeight();case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),cartDel:function(t){s.default.minus(t,t.num),this.cartInfo=s.default.info(),this.getFeight()},cartCheck:function(t){s.default.check(t),this.cartInfo=s.default.info(),this.getFeight()},cartCheckType:function(t){s.default.checkAllByType(t),this.cartInfo=s.default.info(),this.getFeight()},cartCheckAll:function(){s.default.checkAllAction(),this.cartInfo=s.default.info(),this.getFeight()},cartToOrder:function(){var t=s.default.total;if(t)if(console.log("this.priceExpress",this.priceExpress),""!==this.priceExpress)if(this.hasLogin){this.$store.state.mallOrderConfirm.invoice=0,this.$store.state.mallOrderConfirm.priceExpress=this.priceExpress,uni.showLoading({title:"提交中"});var e="/pagesMall/mall/cartConfirm",i=0;this.cartInfo.list[2].forEach(function(t){t.check&&(i=1)}),e+="?jdOrder="+i,setTimeout(function(){uni.navigateTo({url:e}),uni.hideLoading()},500)}else this.goToLoginPage();else uni.showToast({title:"京选商品运费获取失败，稍后重试",icon:"none",duration:2e3});else uni.showToast({title:"请选择商品结算",icon:"none",duration:2e3})},checkJdGoods:function(){var t=d(n.default.mark(function t(){var e,i,r,c,a;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=s.default.info(),i=e.list[2],i.length){t.next=4;break}return t.abrupt("return");case 4:r=0;case 5:if(!(r<i.length)){t.next=14;break}return c=i[r],t.next=9,this.getStockJd(c.uuid,c.num);case 9:a=t.sent,a?s.default.check(c,c.check||!1):s.default.check(c,null);case 11:r++,t.next=5;break;case 14:this.cartInfo=s.default.info(),console.log("this.cartInfo",this.cartInfo);case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getStockJd:function(){var t=d(n.default.mark(function t(e,i){var r,s,c,a,u,o,l;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.userAddressCurrent,r.id){t.next=3;break}return t.abrupt("return",!1);case 3:return s=[r.province,r.city,r.county,r.town],c=s.join("_"),a=JSON.stringify([{skuId:e,num:i}]),t.next=8,this.$store.dispatch("getJdGoodsStock",{skuNums:a,area:c});case 8:if(u=t.sent,console.log("getJdGoodsStock ret:"+JSON.stringify(u)),0!=u.code){t.next=18;break}if(o=u.data,l=0,o.forEach(function(t){t.skuId==e&&(l=t.stockStateId)}),33==l){t.next=16;break}return t.abrupt("return",!1);case 16:t.next=19;break;case 18:return t.abrupt("return",!1);case 19:return t.abrupt("return",!0);case 20:case"end":return t.stop()}},t,this)}));function e(e,i){return t.apply(this,arguments)}return e}(),getFeight:function(){var t=d(n.default.mark(function t(){var e,i,r,c,a,u,o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=s.default.info(),i=e.list[2],i.length){t.next=5;break}return this.priceExpress=0,t.abrupt("return");case 5:if(r=this.userAddressCurrent,r.id){t.next=9;break}return this.priceExpress="",t.abrupt("return");case 9:for(c=[],a=0;a<i.length;a++)u=i[a],u.check&&c.push({skuId:u.uuid,num:u.num});if(c.length){t.next=14;break}return this.priceExpress=0,t.abrupt("return");case 14:return t.next=16,this.$store.dispatch("getJdFreight",{sku:JSON.stringify(c),province:r.province,city:r.city,county:r.county,town:r.town||0});case 16:o=t.sent,console.log("getJdFreight ret",o),0==o.code?this.priceExpress=o.data.freight:this.priceExpress="";case 19:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),onLoad:function(){console.log("onLoad"),this.hasLogin&&!this.userAddressList.length&&this.$store.dispatch("userAddressGet"),console.log("userAddressCurrent",this.userAddressCurrent)},onShow:function(){var t=d(n.default.mark(function t(){var e;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onShow"),this.cartInfo=s.default.info(),console.log("cart info :"+JSON.stringify(this.cartInfo)),e=this.userAddressCurrent,console.log("onShow address",e),t.next=7,this.checkJdGoods();case 7:return t.next=9,this.getFeight();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onReady:function(){console.log("onReady")}};e.default=p},fde5:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-icon",class:["uni-icon-"+t.type],style:{color:t.color,"font-size":t.fontSize},on:{click:function(e){e=t.$handleEvent(e),t.onClick()}}})},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})}}]);